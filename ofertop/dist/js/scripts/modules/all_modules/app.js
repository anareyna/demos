"use strict";var App=function(){var catchDom=void 0,dom=void 0,events=void 0,functions=void 0,initialize=void 0,st=void 0,subscribeEvents=void 0,vars=void 0;return st={body:"body",header:"header.l-header",header_nav:"header .l-header__nav ",header_expand:".u-header-expand",ruptureMobileCutoff:765,iconMenu:".l-header .icon-menu",iconClose:".l-header .icon-x-mark",iconBack:".l-header .icon-arrow-right",headerNav:".l-header .c-nav",headerNavItem:".l-header .c-nav .c-nav__item",headerNavItemLink:".l-header .c-nav .c-nav__item-link",classActiveNavItem:"c-nav__item--active",headerNavDropdown:".c-nav__dropdown",headerAuthContainer:".l-header__auth",headerAuthLoginLink:"#headerAuthLoginLink",headerAuthLoggedLink:"#headerAuthLoggedLink",headerMenuAccount:".l-header .c-menu-account",loginForm:".c-login-form",modal_howtobuy:"#modal_howtobuy",btnOpenLink:"#openModalHowToBuy, #openModalHowToBuyFooter",btnClose:".fancybox-close",slider:".c-slider",tab:"[role='tab']",panel:"[role='tabpanel']",classActiveTab:"l-section-menu__filter-link--active",selHighlightedFilter:"#selHighlightedFilter",lnkHideNewsletter:"#lnkHideNewsletter",newsletterContainer:".l-newsletter",frmNewsletter:"#frmNewsletter",classActiveNewsletter:"l-newsletter--active",mobileNewsletterContainer:".c-special-collection",frmModalNewsletter:"#frmModalNewsletter",lnkOpenNewsletterModalMobile:".l-newsletter__highlight",lnkOpenNewsletterModal:"#openModalNewsletter",btnNewsletterSubscribe:"#btnNewsletterSubscribe",txtNewsletterName:"#txtNewsletterName",txtModalNewsletterName:"#txtModalNewsletterName",txtNewsletterEmail:"#txtNewsletterEmail",txtModalNewsletterEmail:"#txtModalNewsletterEmail",rdNewsletterGenre:"#rdNewsletterGenre",rdModalNewsletterGender:"#rdModalNewsletterGender",rdGenderModal:"input[name='rdGenderModal']",chkCategory:".c-checkbox__label .c-checkbox__input",subscribeButton:".c-modal-newsletter__button",modalFormCSRF:"#csrfSubscribe",btnModalSubscribe:"#btnModalSubscribe",rangePriceSlider:"#rangePriceSlider",rangePriceMin:"#rangePriceMin",rangePriceMax:"#rangePriceMax",frmPriceRange:"#frmPriceRange"},vars={initialPriceMin:$(st.rangePriceMin).val(),initialPriceMax:$(st.rangePriceMax).val()},dom={},catchDom=function(){dom.body=$(st.body),dom.header=$(st.header),dom.header_nav=$(st.header_nav),dom.header_expand=$(st.header_expand),dom.iconMenu=$(st.iconMenu),dom.iconClose=$(st.iconClose),dom.iconBack=$(st.iconBack),dom.headerNav=$(st.headerNav),dom.headerNavItem=$(st.headerNavItem),dom.headerNavItemLink=$(st.headerNavItemLink),dom.headerNavDropdown=$(st.headerNavDropdown),dom.headerAuthContainer=$(st.headerAuthContainer),dom.headerAuthLoginLink=$(st.headerAuthLoginLink),dom.headerAuthLoggedLink=$(st.headerAuthLoggedLink),dom.headerMenuAccount=$(st.headerMenuAccount),dom.loginForm=$(st.loginForm),dom.btnOpenLink=$(st.btnOpenLink),dom.slider=$(st.slider),dom.tab=$(st.tab),dom.panel=$(st.panel),dom.selHighlightedFilter=$(st.selHighlightedFilter),dom.lnkHideNewsletter=$(st.lnkHideNewsletter),dom.newsletterContainer=$(st.newsletterContainer),dom.frmNewsletter=$(st.frmNewsletter),dom.mobileNewsletterContainer=$(st.mobileNewsletterContainer),dom.lnkOpenNewsletterModal=$(st.lnkOpenNewsletterModal),dom.lnkOpenNewsletterModalMobile=$(st.lnkOpenNewsletterModalMobile),dom.frmModalNewsletter=$(st.frmModalNewsletter),dom.btnNewsletterSubscribe=$(st.btnNewsletterSubscribe),dom.txtNewsletterName=$(st.txtNewsletterName),dom.txtModalNewsletterName=$(st.txtModalNewsletterName),dom.txtNewsletterEmail=$(st.txtNewsletterEmail),dom.txtModalNewsletterEmail=$(st.txtModalNewsletterEmail),dom.rdNewsletterGenre=$(st.rdNewsletterGenre),dom.rdModalNewsletterGender=$(st.rdModalNewsletterGender),dom.rdGenderModal=$(st.rdGenderModal),dom.chkCategory=$(st.chkCategory),dom.subscribeButton=$(st.subscribeButton),dom.modalFormCSRF=$(st.modalFormCSRF),dom.btnModalSubscribe=$(st.btnModalSubscribe),dom.rangePriceSlider=$(st.rangePriceSlider),dom.rangePriceMin=$(st.rangePriceMin),dom.rangePriceMax=$(st.rangePriceMax),dom.frmPriceRange=$(st.frmPriceRange)},subscribeEvents=function(){$(window).on("scroll",events.addScrollEffectsHeader),$(window).on("scroll",functions.addHeaderSpace),$(window).on("resizeEnd",functions.addHeaderSpace),dom.iconMenu.on("click",events.openMainMenu),dom.iconClose.on("click",events.closeMainMenu),dom.headerNavItemLink.on("click",events.toggleNavDropdown),dom.header.on("click",st.headerAuthLoggedLink,events.openMenuAccount),dom.iconBack.on("click",events.closeMenues),dom.headerAuthLoginLink.on("click",events.showLoginForm),$(window).on("resizeEnd",events.fixHeaderInDesktop),dom.btnOpenLink.on("click",functions.showModal),dom.tab.on("click",events.togglePanel),dom.selHighlightedFilter.on("change",events.selPanel),dom.lnkHideNewsletter.on("click",events.hideNewsletter),$(window).on("resizeEnd",functions.repositionNewsletter),dom.lnkOpenNewsletterModal.on("click",events.showNewsletterModal),dom.btnNewsletterSubscribe.on("click",events.validateFormNewsletter),dom.lnkOpenNewsletterModalMobile.on("click",events.showNewsletterModal),dom.frmModalNewsletter.on("submit",events.subscribeAction),dom.rangePriceSlider.on("change",events.updateInputText),dom.rangePriceSlider.on("slideStop",events.reloadPage),dom.rangePriceMin.on("focusout",events.minPriceHasChanged),dom.rangePriceMax.on("focusout",events.maxPriceHasChanged),dom.rangePriceMin.on("keydown keypress keyup",events.removeLetters),dom.rangePriceMax.on("keydown keypress keyup",events.removeLetters)},events={addScrollEffectsHeader:function(){var shrinkHeader=void 0;shrinkHeader=460,$(window).width()<=st.ruptureMobileCutoff&&(shrinkHeader=150);var scroll=window.pageYOffset||document.documentElement.scrollTop;scroll>=shrinkHeader?dom.header.addClass("l-header--active"):dom.header.removeClass("l-header--active")},openMainMenu:function(){dom.iconMenu.hide(),dom.iconClose.show(),dom.header.attr("style","position: relative !important"),$("html,body").animate({scrollTop:0},100),dom.headerNav.fadeIn("fast"),dom.headerAuthContainer.fadeIn("fast").css("display","flex")},closeMainMenu:function(){dom.iconClose.hide(),dom.iconMenu.show(),dom.header.attr("style","position: initial"),dom.headerNav.fadeOut("fast"),dom.headerAuthContainer.fadeOut("fast")},toggleNavDropdown:function(e){$(window).width()<=st.ruptureMobileCutoff&&(e.preventDefault(),$(this).parents(".c-nav__item").toggleClass(st.classActiveNavItem),$(this).parents(".c-nav__item").find(st.headerNavDropdown).stop().slideToggle("fast"))},openMenuAccount:function(){dom.headerNav.hide(),$(st.headerMenuAccount).css("visibility","visible"),dom.iconClose.hide(),dom.iconBack.show()},closeMenues:function(){dom.iconBack.hide(),dom.headerNav.fadeIn("fast"),dom.headerMenuAccount.css("visibility","hidden"),dom.iconClose.show(),dom.loginForm.hide()},showLoginForm:function(){dom.iconBack.show(),dom.iconClose.hide(),dom.headerNav.hide(),dom.loginForm.show()},fixHeaderInDesktop:function(){$(window).width()>st.ruptureMobileCutoff&&(dom.header.removeAttr("style"),dom.headerNavDropdown.removeAttr("style"),dom.iconClose.trigger("click"),dom.headerNavItem.removeClass(st.classActiveNavItem),$(st.headerMenuAccount).removeAttr("style"),dom.loginForm.removeAttr("style"),dom.iconBack.hide())},togglePanel:function(){dom.tab.removeClass(st.classActiveTab),$(this).addClass(st.classActiveTab);var tabPanelId=$(this).data("href");dom.panel.fadeOut("fast"),$(tabPanelId).fadeIn("fast")},selPanel:function(){var tabPanelId=$(this).find("option:selected").val();dom.panel.fadeOut("fast"),$(tabPanelId).fadeIn("fast")},hideNewsletter:function(){dom.newsletterContainer.slideUp("fast")},showNewsletterModal:function(){dom.newsletterContainer.length&&(dom.rdGenderModal.filter("[value='"+$("input[name='rdGender']:checked").val()+"']").attr("checked",!0),dom.txtModalNewsletterName.val(dom.txtNewsletterName.val()),dom.txtModalNewsletterEmail.val(dom.txtNewsletterEmail.val()));var settings={type:"inline",href:st.frmModalNewsletter,closeBtn:!0,afterClose:function(){dom.frmModalNewsletter.parsley().reset()}};$.fancybox(settings)},validateFormNewsletter:function(event){dom.frmNewsletter.parsley().isValid()&&(event.preventDefault(),events.showNewsletterModal())},subscribeAction:function(e){if(e.preventDefault(),$(this).parsley().isValid()){var genereOption=0;2===parseInt($("input[name='rdGenderModal']:checked").val())?genereOption=2:1===parseInt($("input[name='rdGenderModal']:checked").val())&&(genereOption=1);var requestData={nombre:dom.txtModalNewsletterName.val(),email:dom.txtModalNewsletterEmail.val(),genero:genereOption,categorias:functions.getSelectedCategories(),csrf:dom.modalFormCSRF.val()};$.ajax({url:"/suscriptor/procesar-rediseno",data:requestData,type:"post",beforeSend:function(){$.fancybox.showLoading(),dom.btnModalSubscribe.prop("disabled",!0)},success:function(data){$.fancybox.hideLoading(),dom.modalFormCSRF.val(data.data.csrf),dom.btnModalSubscribe.prop("disabled",!1),data.status?($("input[name='rdGender']").prop("checked",!1),$("input[name='rdGenderModal']").prop("checked",!1),$("input[name='chkCategory']").prop("checked",!1),dom.txtNewsletterName.val(""),dom.txtNewsletterEmail.val(""),$.fancybox('<h3 class="u-brandColor u-textCenter">¡Gracias por suscribirte a Ofertop!</h3>\n\t\t\t\t\t\t\t\t\t<p>Pronto nos contactaremos para ofrecerte las mejores ofertas.</p>')):$.fancybox("<p>"+data.msg+"</p>")},error:function(){$.fancybox.hideLoading(),dom.btnModalSubscribe.prop("disabled",!1)}})}},updateInputText:function(){dom.frmPriceRange.parsley().reset();var minVal=parseInt($(this).val().split(",")[0]),maxVal=parseInt($(this).val().split(",")[1]);dom.rangePriceMin.val(minVal),dom.rangePriceMax.val(maxVal)},reloadPage:function(){var url=window.location.href,minRange=dom.rangePriceMin.val(),maxRange=dom.rangePriceMax.val();if(dom.frmPriceRange.parsley().isValid())if(log("is valid"),null!==url.match(/min=\d+&max=\d+/)){var newMinMaxUrl=url.replace(/min=\d+&max=\d+/,"min="+minRange+"&max="+maxRange);window.location.href=newMinMaxUrl}else null!==url.match(/\?/)?window.location.href=url+"&min="+minRange+"&max="+maxRange:window.location.href=url+"?min="+minRange+"&max="+maxRange},minPriceHasChanged:function(){vars.initialPriceMin!==$(this).val()&&events.reloadPage()},maxPriceHasChanged:function(){vars.initialPriceMax!==$(this).val()&&events.reloadPage()},setSliderValue:function(){var myRangeSlider=dom.rangePriceSlider.slider(),minVal=parseInt(dom.rangePriceMin.val()),maxVal=parseInt(dom.rangePriceMax.val());myRangeSlider.slider("setValue",[minVal,maxVal])},removeLetters:function(evt){var key=void 0,key_str=void 0,regex=void 0,theEvent=void 0;theEvent=evt||window.event,key=theEvent.keyCode||theEvent.which,key_str=String.fromCharCode(key),regex=/^[0-9\b.,]+$/,key>=96&&key<=105||key>=37&&key<=40||9===key?theEvent.returnValue=!0:regex.test(key_str)||(theEvent.returnValue=!1,theEvent.preventDefault&&theEvent.preventDefault())}},functions={inputRange:function(){dom.rangePriceSlider.slider({})},addHeaderSpace:function(){"fixed"===dom.header.css("position")?$(".u-header-expand").show():$(".u-header-expand").hide()},showModal:function(){var settings={type:"inline",href:st.modal_howtobuy,title:!1,padding:[0,0,0,0],closeBtn:!0,overlayShow:!0};$.fancybox(settings)},validate:function(){window.Parsley.setLocale("es")},extraValidators:function(){window.Parsley.addValidator("notequalto",function(value,requirement){return value!==$(requirement).val()},32).addMessage("es","notequalto","Este valor no deberia ser igual"),window.Parsley.addValidator("gt",function(value,requirement){return parseFloat(value)>parseFloat($(requirement).val())},32).addMessage("es","gt","Este valor deberia ser mayor"),window.Parsley.addValidator("ge",function(value,requirement){return parseFloat(value)>=parseFloat($(requirement).val())},32).addMessage("es","ge","Este número debería ser mayor o igual que el precio mínimo"),window.Parsley.addValidator("lt",function(value,requirement){return parseFloat(value)<parseFloat($(requirement).val())},32).addMessage("es","lt","Este valor deberia ser menor"),window.Parsley.addValidator("le",function(value,requirement){return parseFloat(value)<=parseFloat($(requirement).val())},32).addMessage("es","le","Este número debería ser menor o igual que el precio máximo")},addSlider:function(){dom.slider.slick({dots:!0,autoplay:!0,lazyLoad:"ondemand",responsive:[{breakpoint:900,settings:{slidesToShow:1,slidesToScroll:1}}]})}},initialize=function(){catchDom(),subscribeEvents(),functions.addHeaderSpace(),functions.addSlider(),functions.inputRange()},{init:initialize}}();App.init();